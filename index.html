<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tarjeta Digital — FLORIMAR</title>

  <link rel="icon" type="image/jpeg" href="FLORIMAR LOGOTIPO_Mesa de trabajo 1 copia 5.jpg">
  <meta property="og:title" content="Jessica Alejandro Lorzo Vázquez — FLORIMAR Oportunidades Inmobiliarias" />
  <meta property="og:description" content="Contacto, WhatsApp, ubicación y vCard." />
  <meta property="og:image" content="FLORIMAR LOGOTIPO_Mesa de trabajo 1 copia 7.jpg" />
  <meta name="theme-color" content="#00b894" />

  <style>
    :root{
      --bg:#0b1220;            /* recalculado con el logo */
      --muted: rgba(255,255,255,.75);
      --ring: rgba(255,255,255,.14);
      --white:#ffffff;
      --accent:#00b894;        /* recalculado con el logo */
      --accent2:#00d1a8;       /* recalculado con el logo */
      --glow:#66ffd0;          /* recalculado con el logo */
      --luna:#1f3b82;
      --radius:22px;
      --shadow:0 24px 70px rgba(0,0,0,.35);
    }
    * { box-sizing: border-box; }
    html,body{ margin:0; height:100% }
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--white);
      background:
        radial-gradient(900px 600px at 100% -10%, var(--glow)55, transparent),
        radial-gradient(900px 600px at -10% 110%, var(--accent2)55, transparent),
        radial-gradient(900px 700px at 50% 120%, var(--luna)33, transparent),
        var(--bg);
      min-height:100%;
      display:flex; align-items:center; justify-content:center;
      padding:26px;
    }
    .wrap{ width:min(760px,94vw); margin:auto; position:relative }
    .brand{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px }
    .brand .row{ display:flex; align-items:center; gap:12px }
    .logo{ height:56px; width:auto; object-fit:contain; filter: drop-shadow(0 2px 8px rgba(0,0,0,.25)) }
    .muted{ color:var(--muted); font-size:12px }
    .card{ background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.04));
           border:1px solid var(--ring); backdrop-filter: blur(10px);
           border-radius: var(--radius); padding:22px; box-shadow:var(--shadow) }
    .row-info{ display:flex; align-items:center; gap:16px }
    .avatar{ width:90px; height:90px; border-radius:999px; background:#fff; padding:12px; object-fit:contain; border:2px solid rgba(255,255,255,.18) }
    .name{ font-size:26px; font-weight:800; margin:0 }
    .role{ margin:6px 0 0; font-size:13px; color:#eaf7f1 }
    .grid{ display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:10px; margin-top:18px }
    .btn{ display:flex; align-items:center; justify-content:center; gap:10px; padding:12px 14px; border-radius:16px;
          border:1px solid var(--ring); background:rgba(255,255,255,.06); color:var(--white); text-decoration:none;
          transition:.25s transform,.25s background }
    .btn:hover{ transform:translateY(-2px); background:rgba(255,255,255,.12) }
    .primary{ background:var(--white); color:#001 }
    .chip{ background:rgba(255,255,255,.06) }
    .footer{ text-align:center; color:var(--muted); font-size:12px; margin-top:16px }
    @media (max-width:520px){ .grid{ grid-template-columns:1fr } }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="brand">
      <div class="row">
        <img class="logo" id="logoImg" src="FLORIMAR LOGOTIPO_Mesa de trabajo 1 copia 7.jpg" alt="Logo">
        <div>
          <div style="font-weight:700; letter-spacing:.3px">FLORIMAR Oportunidades Inmobiliarias</div>
          <div class="muted">Tarjeta Digital</div>
        </div>
      </div>
      <div class="row">
        <a class="btn chip" href="#" id="shareBtn">Compartir</a>
        <a class="btn chip" id="avatarPhoto" href="#">Foto</a>
        <a class="btn chip" id="avatarLogo" href="#">Logo</a>
      </div>
    </div>

    <section class="card">
      <div class="row-info">
        <img class="avatar" id="avatar" src="FLORIMAR LOGOTIPO_Mesa de trabajo 1 copia 5.jpg" alt="Avatar">
        <div>
          <h1 class="name" id="nombre">Jessica Alejandro Lorzo Vázquez</h1>
          <p class="role">Fundadora — FLORIMAR</p>
        </div>
      </div>

      <div class="grid">
        <a class="btn" id="btnCall"  href="#">Llamar</a>
        <a class="btn" id="btnWhats" href="#" target="_blank" rel="noopener">WhatsApp</a>
        <a class="btn" id="btnMail"  href="#">Email</a>
        <a class="btn" id="btnSite"  href="#" target="_blank" rel="noopener">Sitio Web</a>
        <a class="btn" id="btnMaps"  href="#" target="_blank" rel="noopener">Ubicación</a>
      </div>

      <div class="row-info" style="gap:10px; margin-top:16px; flex-wrap:wrap;">
        <a class="btn primary" id="saveVcf">Guardar contacto</a>
        <a class="btn chip" id="brandLink" href="https://lunagrupoinm.com/" target="_blank" rel="noopener">lunagrupoinm.com</a>
      </div>
    </section>

    <div class="footer">© <span id="year"></span> LUNA Grupo Inmobiliario. Todos los derechos reservados.</div>
  </div>

  <script>
    // --- Datos ---
    const profile = {
      nombre:   "Jessica Alejandro Lorzo Vázquez",
      cargo:    "Fundadora",
      telefono: "9545595087",
      whatsapp: "529545595087",
      email:    "VENTAS@LUNAGRUPOINM.COM",
      sitio:    "https://lunagrupoinm.com/",
      mapsUrl:  "https://maps.app.goo.gl/M5bFtkvP7BvrHLMG9",
      empresa:  "FLORIMAR Oportunidades Inmobiliarias"
    };

    // Año
    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('nombre').textContent = profile.nombre;

    // Botones
    btnCall.href  = 'tel:' + profile.telefono;
    btnWhats.href = 'https://wa.me/' + profile.whatsapp;
    btnMail.href  = 'mailto:' + profile.email;
    btnSite.href  = profile.sitio;
    brandLink.href= profile.sitio;
    btnMaps.href  = profile.mapsUrl;

    // Compartir
    const shareBtn = document.getElementById('shareBtn');
    shareBtn.addEventListener('click', async (e)=>{
      e.preventDefault();
      const data = { title: profile.nombre, text: profile.nombre + ' — ' + profile.cargo, url: location.href };
      try { if (navigator.share) { await navigator.share(data); } else { await navigator.clipboard.writeText(location.href); shareBtn.textContent='Copiado'; setTimeout(()=>shareBtn.textContent='Compartir',1200); } } catch(e){}
    });

    // vCard
    document.getElementById('saveVcf').addEventListener('click', ()=>{
      const vcf = `BEGIN:VCARD\nVERSION:3.0\nFN:${profile.nombre}\nORG:${profile.empresa}\nTITLE:${profile.cargo}\nTEL;TYPE=CELL:${profile.telefono}\nEMAIL;TYPE=INTERNET:${profile.email}\nURL:${profile.sitio}\nNOTE:Ubicación (Maps): ${profile.mapsUrl}\nEND:VCARD`;
      const blob = new Blob([vcf], {type:'text/vcard;charset=utf-8'});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob);
      a.download = profile.nombre.replace(/\s+/g,'_') + '.vcf'; document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(a.href), 1000);
    });

    // Avatar Foto/Logo
    const avatarEl = document.getElementById('avatar');
    const photoBtn = document.getElementById('avatarPhoto');
    const logoBtn  = document.getElementById('avatarLogo');
    function setAvatar(mode){
      const isLogo = mode==='logo';
      avatarEl.src = isLogo ? 'FLORIMAR LOGOTIPO_Mesa de trabajo 1 copia 5.jpg' : 'Imagen1.jpg';
      if(isLogo){ avatarEl.style.objectFit='contain'; avatarEl.style.background='#fff'; avatarEl.style.padding='12px'; }
      else      { avatarEl.style.objectFit='cover';   avatarEl.style.background='transparent'; avatarEl.style.padding='0'; }
      photoBtn.classList.toggle('primary', !isLogo);
      logoBtn .classList.toggle('primary',  isLogo);
      localStorage.setItem('avatarModeFlorimar', mode);
    }
    photoBtn.addEventListener('click', (e)=>{ e.preventDefault(); setAvatar('photo'); });
    logoBtn .addEventListener('click', (e)=>{ e.preventDefault(); setAvatar('logo');  });
    setAvatar(localStorage.getItem('avatarModeFlorimar') || 'logo');

    // Paleta automática desde el logo
    function rgbToHsl(r,g,b){r/=255;g/=255;b/=255;const m=Math.max(r,g,b),n=Math.min(r,g,b);let h,s,l=(m+n)/2;if(m===n){h=s=0;}else{const d=m-n;s=l>0.5?d/(2-m-n):d/(m+n);switch(m){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}h/=6;}return[h,s,l];}
    function hslToRgb(h,s,l){let r,g,b;if(s===0){r=g=b=l;}else{const u=(p,q,t)=>{if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p;};const q=l<0.5?l*(1+s):l+s-l*s;const p=2*l-q;r=u(p,q,h+1/3);g=u(p,q,h);b=u(p,q,h-1/3);}return[Math.round(r*255),Math.round(g*255),Math.round(b*255)];}
    const toHex = ([r,g,b])=>`#${[r,g,b].map(v=>v.toString(16).padStart(2,'0')).join('')}`;

    function applyPaletteFrom(imgEl){
      const c=document.createElement('canvas'); const w=imgEl.naturalWidth,h=imgEl.naturalHeight; if(!w||!h) return;
      const ctx=c.getContext('2d'); c.width=240; c.height=240; ctx.drawImage(imgEl,0,0,c.width,c.height);
      const {data}=ctx.getImageData(0,0,c.width,c.height); let R=0,G=0,B=0,n=0;
      for(let i=0;i<data.length;i+=4){const r=data[i],g=data[i+1],b=data[i+2]; if(r>240&&g>240&&b>240) continue; R+=r;G+=g;B+=b;n++;}
      if(!n) return; const avg=[Math.round(R/n),Math.round(G/n),Math.round(B/n)]; const hsl=rgbToHsl(avg[0],avg[1],avg[2]);
      const accent=avg; const h2=(hsl[0]+0.08)%1, s2=Math.min(1,hsl[1]*1.15+0.05), l2=hsl[2];
      const accent2=hslToRgb(h2,s2,l2); const lDark=Math.max(0,hsl[2]*0.35); const bg=hslToRgb(hsl[0],hsl[1],lDark); const lGlow=Math.min(1,hsl[2]*1.2+0.05); const glow=hslToRgb(hsl[0],hsl[1],lGlow);
      const root=document.documentElement; root.style.setProperty('--accent',toHex(accent)); root.style.setProperty('--accent2',toHex(accent2)); root.style.setProperty('--bg',toHex(bg)); root.style.setProperty('--glow',toHex(glow));
      const meta=document.querySelector('meta[name="theme-color"]'); if(meta) meta.setAttribute('content', toHex(accent));
    }
    const logoEl=document.getElementById('logoImg'); if(logoEl.complete) applyPaletteFrom(logoEl); else logoEl.addEventListener('load',()=>applyPaletteFrom(logoEl));
  </script>
</body>
</html>
